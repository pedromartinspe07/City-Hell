import openwakeword
import pyaudio
import numpy as np

model = openwakeword.Model(wakeword_models=["plinux"])

audio = pyaudio.PyAudio()
stream = audio.open(
    format=pyaudio.paInt16,
    channels=1,
    rate=16000,
    input=True,
    frames_per_buffer=1280
)

def listen_wakeword():
    data = np.frombuffer(stream.read(1280), dtype=np.int16)
    prediction = model.predict(data)

    if prediction["plinux"] > 0.7:
        return True
    return False